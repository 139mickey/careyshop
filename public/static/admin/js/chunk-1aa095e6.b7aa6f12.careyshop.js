(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1aa095e6"],{"0572":function(t,o,e){"use strict";e.d(o,"a",(function(){return a})),e.d(o,"g",(function(){return s})),e.d(o,"c",(function(){return i})),e.d(o,"d",(function(){return r})),e.d(o,"e",(function(){return u})),e.d(o,"b",(function(){return d})),e.d(o,"h",(function(){return c})),e.d(o,"f",(function(){return l}));var n=e("bc07");function a(t){return Object(n["a"])({url:"/v1/coupon",method:"post",params:{method:"add.coupon.item"},data:t})}function s(t){return Object(n["a"])({url:"/v1/coupon",method:"post",params:{method:"set.coupon.item"},data:t})}function i(t){return Object(n["a"])({url:"/v1/coupon",method:"post",params:{method:"get.coupon.item"},data:{coupon_id:t}})}function r(t){return Object(n["a"])({url:"/v1/coupon",method:"post",params:{method:"get.coupon.list"},data:t})}function u(t){return Object(n["a"])({url:"/v1/coupon",method:"post",params:{method:"get.coupon.select"},data:t})}function d(t){return Object(n["a"])({url:"/v1/coupon",method:"post",params:{method:"del.coupon.list"},data:{coupon_id:t}})}function c(t,o){return Object(n["a"])({url:"/v1/coupon",method:"post",params:{method:"set.coupon.status"},data:{coupon_id:t,status:o}})}function l(t,o){return Object(n["a"])({url:"/v1/coupon",method:"post",params:{method:"set.coupon.invalid"},data:{coupon_id:t,is_invalid:o}})}},"51a7":function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("el-table",{attrs:{data:t.discountList}},[e("el-table-column",{attrs:{label:"编号",prop:"goods_id","min-width":"15"}}),e("el-table-column",{attrs:{label:"商品名称",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("div",{staticClass:"discount-text",attrs:{title:t._f("filterGoodsName")(o.row.goods)}},[e("span",{staticClass:"link",on:{click:function(e){return t.handleViewGoods(o.row.goods_id)}}},[t._v(t._s(t._f("filterGoodsName")(o.row.goods)))])])]}}])}),e("el-table-column",{attrs:{label:t.typeMap[t.type]||"折扣方式",width:"160"},scopedSlots:t._u([{key:"header",fn:function(o){return[e("el-tooltip",{attrs:{placement:"top",content:t.typeHelp[t.type]}},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.typeHelp[t.type],expression:"typeHelp[type]"}],staticClass:"el-icon-warning-outline cs-mr-10"})]),e("span",[t._v(t._s(o.column.label))])]}},{key:"default",fn:function(o){return["3"===t.type?e("el-select",{attrs:{value:t.filterCoupon(o.row.discount),placeholder:"请选择",size:"mini"},on:{change:function(t){o.row.discount=t}}},t._l(t.couponData,(function(t){return e("el-option",{key:t.coupon_id,attrs:{label:t.name,value:t.coupon_id}})})),1):e("el-input-number",{attrs:{"controls-position":"right",placeholder:"请输入",size:"mini",max:"0"===t.type?100:Number.MAX_SAFE_INTEGER,min:0,precision:2},model:{value:o.row.discount,callback:function(e){t.$set(o.row,"discount",e)},expression:"scope.row.discount"}})]}}])}),e("el-table-column",{attrs:{label:t.type,align:"center",width:"80"},scopedSlots:t._u([{key:"header",fn:function(o){return[e("el-popover",{attrs:{placement:"top-end",trigger:"manual"},model:{value:t.batchVisible,callback:function(o){t.batchVisible=o},expression:"batchVisible"}},["3"===t.type?e("el-select",{staticClass:"cs-mb-10",attrs:{placeholder:"请选择"+t.typeMap[o.column.label],size:"mini"},model:{value:t.batchValue,callback:function(o){t.batchValue=o},expression:"batchValue"}},t._l(t.couponData,(function(t){return e("el-option",{key:t.coupon_id,attrs:{label:t.name,value:t.coupon_id}})})),1):e("el-input-number",{staticStyle:{width:"150px","margin-bottom":"10px"},attrs:{placeholder:"请输入"+t.typeMap[o.column.label],"controls-position":"right",size:"mini",max:"0"===t.type?100:Number.MAX_SAFE_INTEGER,min:0,precision:2},model:{value:t.batchValue,callback:function(o){t.batchValue=o},expression:"batchValue"}}),e("div",{staticClass:"cs-tr"},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(o){t.batchVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.batchDiscount}},[t._v("确定")])],1),e("el-button",{attrs:{slot:"reference",disabled:!t.type,type:"text"},on:{click:t.handleBatch},slot:"reference"},[t._v("批处理")])],1)]}},{key:"default",fn:function(o){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.remove(o.$index)}}},[t._v("删除")])]}}])})],1),e("cs-goods-drawer",{ref:"goodsDrawer"})],1)},a=[],s=(e("7db0"),e("4160"),e("a434"),e("b0c0"),e("d3b7"),e("3ca3"),e("159b"),e("ddb0"),e("b85c")),i=e("0572"),r=e("a2a9"),u={components:{csGoodsDrawer:function(){return e.e("chunk-7adc1a64").then(e.bind(null,"fd20"))}},props:{value:{type:Array,required:!0,default:function(){}},type:{type:String,required:!1,default:null},status:{type:String,required:!0,default:""},typeMap:{default:function(){}}},computed:{discountList:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},data:function(){return{typeHelp:{0:"打折额度，比如65表示按6.5折结算",1:"减多少额度，比如65表示在原价的基础上减去65",2:"固定价格，比如65则按65的价格结算",3:"赠送优惠劵，订单完成后赠送指定的优惠劵给顾客"},batchValue:void 0,batchVisible:!1,couponData:[]}},watch:{type:{handler:function(){this.discountList.forEach((function(t){t.discount=void 0}))}}},filters:{filterGoodsName:function(t){return t?t.name:""}},mounted:function(){var t=this,o=[Object(i["e"])({type:3,status:1,is_invalid:0,is_shelf_life:1})];if(this.value.length&&"update"===this.status){var e=[];this.value.forEach((function(t){e.push(t.goods_id)})),e.length&&o.push(Object(r["h"])(e))}Promise.all(o).then((function(o){if(t.couponData=o[0].data||[],o[1]&&o[1].data){var e,n=Object(s["a"])(t.discountList);try{var a=function(){var n=e.value,a=o[1].data.find((function(t){return t.goods_id===n.goods_id}));t.$set(n,"goods",a)};for(n.s();!(e=n.n()).done;)a()}catch(i){n.e(i)}finally{n.f()}}}))},methods:{remove:function(t){this.discountList.splice(t,1)},filterCoupon:function(t){return this.couponData.find((function(o){return o.coupon_id===t}))?t:null},handleBatch:function(){this.batchValue=void 0,this.batchVisible=!0},batchDiscount:function(){var t=this;this.batchVisible=!1,this.discountList.forEach((function(o){o.discount=t.batchValue}))},handleViewGoods:function(t){var o=this;this.$nextTick((function(){o.$refs.goodsDrawer.show(t)}))}}},d=u,c=(e("659e"),e("2877")),l=Object(c["a"])(d,n,a,!1,null,"663baadc",null);o["default"]=l.exports},"659e":function(t,o,e){"use strict";var n=e("8b8f"),a=e.n(n);a.a},"8b8f":function(t,o,e){},a2a9:function(t,o,e){"use strict";e.d(o,"a",(function(){return a})),e.d(o,"l",(function(){return s})),e.d(o,"g",(function(){return i})),e.d(o,"c",(function(){return r})),e.d(o,"h",(function(){return u})),e.d(o,"p",(function(){return d})),e.d(o,"o",(function(){return c})),e.d(o,"n",(function(){return l})),e.d(o,"q",(function(){return p})),e.d(o,"f",(function(){return m})),e.d(o,"j",(function(){return f})),e.d(o,"d",(function(){return h})),e.d(o,"m",(function(){return b})),e.d(o,"b",(function(){return g})),e.d(o,"e",(function(){return v})),e.d(o,"i",(function(){return _})),e.d(o,"k",(function(){return y}));var n=e("bc07");function a(t){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"add.goods.item"},data:t})}function s(t){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"set.goods.item"},data:t})}function i(t){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"get.goods.item"},data:{goods_id:t}})}function r(t,o){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"del.goods.list"},data:{goods_id:t,is_delete:o}})}function u(t){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"get.goods.select"},data:{goods_id:t}})}function d(t,o){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"set.recommend.goods.list"},data:{goods_id:t,is_recommend:o}})}function c(t,o){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"set.new.goods.list"},data:{goods_id:t,is_new:o}})}function l(t,o){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"set.hot.goods.list"},data:{goods_id:t,is_hot:o}})}function p(t,o){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"set.shelves.goods.list"},data:{goods_id:t,status:o}})}function m(t){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"get.goods.attr.list"},data:{goods_id:t}})}function f(t){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"get.goods.spec.list"},data:{goods_id:t}})}function h(t){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"get.goods.admin.list"},data:t})}function b(t,o){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"set.goods.sort"},data:{goods_id:t,sort:o}})}function g(t){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"copy.goods.item"},data:{goods_id:t}})}function v(t){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"get.goods.attr.config"},data:{goods_id:t}})}function _(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"get.goods.spec.config"},data:{goods_id:t,key_to_array:o}})}function y(t){return Object(n["a"])({url:"/v1/goods",method:"post",params:{method:"get.goods.spec.menu"},data:{goods_id:t}})}}}]);